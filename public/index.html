<!DOCTYPE html>
<html lang="el">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Board 1â€“100</title>

<style>
body{
  margin:0;
  background:#111;
  font-family:Arial, Helvetica, sans-serif;
  overflow:hidden;
  color:white;
}

/* BOARD */
.board{
  position:absolute;
  left:50%;
  top:50%;
  transform:translate(-50%,-50%);
  display:grid;
  grid-template-columns:repeat(10,60px);
  grid-template-rows:repeat(10,60px);
  gap:4px;
}

/* PLAYERS PANEL */
#players{
  position:absolute;
  left:20px;
  top:20px;
}

#waiting{
  margin-top:20px;
  font-size:28px;
}

/* QR */
#qrBox{
  position:absolute;
  right:20px;
  top:20px;
  text-align:center;
}

/* OVERLAY */
#overlay{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.85);
  display:flex;
  justify-content:center;
  align-items:center;
  opacity:0;
  pointer-events:none;
  transition:.25s;
}
#overlay.show{ opacity:1; }
#overlayBox{
  background:#000;
  border:3px solid #fff;
  border-radius:16px;
  padding:40px 60px;
  font-size:34px;
}
.cell{
  display:flex;
  justify-content:center;
  align-items:center;
  border-radius:8px;
  font-weight:bold;
  font-size:18px;
  cursor:pointer;
}
.waitingToken{
  margin:8px 0;
}
</style>
</head>
<body>

<div id="players">
  <h3>Î Î±Î¯ÎºÏ„ÎµÏ‚</h3>
  <div id="waiting"></div>
</div>

<div id="qrBox">
  <div>Scan to join</div>
  <img id="qrImg" width="140">
</div>

<div class="board" id="board"></div>

<div id="overlay"><div id="overlayBox"></div></div>

<script src="/socket.io/socket.io.js"></script>
<script>
// QR
document.getElementById("qrImg").src="/qr?"+Date.now();

// SOCKET
const socket=io();
const waitingDiv=document.getElementById("waiting");

socket.on("updatePlayers",(players)=>{
  waitingDiv.innerHTML="";
  players.forEach(p=>{
    const d=document.createElement("div");
    d.className="waitingToken";
    d.textContent=`${p.token} ${p.name}`;
    waitingDiv.appendChild(d);
  });
});

// ===== VERSION 1.0 BOARD =====
const effects = {/* Î¯Î´Î¹Î¿ mapping ÏŒÏ€Ï‰Ï‚ Ï€ÏÎ¹Î½ */};

function colorFor(i){
  const hue=Math.floor((i-1)*(360/100));
  const light=45+((i%10)*3);
  return `hsl(${hue},80%,${light}%)`;
}
function snakeNumber(r,c){
  const b=r*10;
  return (r%2===0)?b+c+1:b+(10-c);
}
function showOverlay(text){
  const o=document.getElementById("overlay");
  const b=document.getElementById("overlayBox");
  b.textContent=text;
  o.classList.add("show");
  setTimeout(()=>o.classList.remove("show"),4000);
}
function describe(num){
  if(!effects[num]) return "ÎŸÏ…Î´Î­Ï„ÎµÏÎ¿ Ï„ÎµÏ„ÏÎ¬Î³Ï‰Î½Î¿";
  const e=effects[num];
  if(e.type==="plus") return `âž• ÎšÎµÏÎ´Î¯Î¶ÎµÎ¹Ï‚ ${e.value} Ï€ÏŒÎ½Ï„Î¿Ï…Ï‚`;
  if(e.type==="minus") return `âž– Î§Î¬Î½ÎµÎ¹Ï‚ ${e.value} Ï€ÏŒÎ½Ï„Î¿Ï…Ï‚`;
  if(e.type==="give") return `ðŸŽ Î”Î¯Î½ÎµÎ¹Ï‚ ${e.value} Ï€ÏŒÎ½Ï„Î¿Ï…Ï‚ ÏƒÎµ ÏŒÎ»Î¿Ï…Ï‚`;
}

const board=document.getElementById("board");
for(let r=9;r>=0;r--){
  for(let c=0;c<10;c++){
    const num=snakeNumber(r,c);
    const cell=document.createElement("div");
    cell.className="cell";
    cell.style.background=colorFor(num);
    cell.style.color=(num%10<5)?"#000":"#fff";
    cell.textContent=num;
    cell.onclick=()=>showOverlay(describe(num));
    board.appendChild(cell);
  }
}
</script>

</body>
</html>
